<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title><%= title %></title>
  <style>
    body { font-family: sans-serif; padding: 20px; background-color: #f7f7f7; }
    h1 { margin-top: 40px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; background: #fff; }
    th, td { padding: 10px; border: 1px solid #ccc; text-align: left; }
    th { background-color: #eee; }
    a.button { padding: 5px 10px; border: 1px solid #888; border-radius: 4px; text-decoration: none; background: #eee; margin-right: 5px; }
    .section { margin-bottom: 40px; }
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logout {
      color: red;
      font-weight: bold;
      text-decoration: none;
    }
  </style>
</head>
<body>

  <div class="topbar">
    <h2>Bienvenue, <%= user.name %> 👋</h2>
    <a href="/users/logout" class="logout">🚪 Se déconnecter</a>
  </div>

  <h1>📊 Tableau de bord</h1>

  <!-- Utilisateurs -->
  <div class="section">
    <h2>👤 Utilisateurs</h2>
    <% if (users.length === 0) { %>
      <p>Aucun utilisateur.</p>
    <% } else { %>
      <table>
        <thead>
          <tr>
            <th>Nom</th>
            <th>Email</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% users.forEach(user => { %>
            <tr>
              <td><%= user.name %></td>
              <td><%= user.email %></td>
              <td>
                <a class="button" href="/dashboard/users/<%= user._id %>/edit">✏️ Modifier</a>
                <a class="button" href="/dashboard/users/delete?user=<%= user._id %>">🗑️ Supprimer</a>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } %>
  </div>

  <!-- Catways -->
  <div class="section">
    <h2>🚧 Catways</h2>
    <% if (catways.length === 0) { %>
      <p>Aucun catway.</p>
    <% } else { %>
      <table>
        <thead>
          <tr>
            <th>Numéro</th>
            <th>Type</th>
            <th>État</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% catways.forEach(catway => { %>
            <tr>
              <td><%= catway.catwayNumber %></td>
              <td><%= catway.catwayType %></td>
              <td><%= catway.catwayState %></td>
              <td>
                <a class="button" href="/dashboard/catways/<%= catway._id %>/edit">✏️ Modifier</a>
                <a class="button" href="/dashboard/catways/<%= catway._id %>/delete">🗑️ Supprimer</a>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } %>
  </div>

  <!-- Réservations -->
  <div class="section">
    <h2>📅 Réservations</h2>
    <% if (reservation.length === 0) { %>
      <p>Aucune réservation enregistrée.</p>
    <% } else { %>
      <table>
        <thead>
          <tr>
            <th>Client</th>
            <th>Bateau</th>
            <th>Date début</th>
            <th>Date fin</th>
            <th>Catway</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% reservation.forEach(r => { %>
            <tr>
              <td><%= r.clientName %></td>
              <td><%= r.boatName %></td>
              <td><%= new Date(r.startDate).toLocaleDateString() %></td>
              <td><%= new Date(r.endDate).toLocaleDateString() %></td>
              <td><%= r.catwayNumber %></td>
              <td>
                <a class="button" href="/catways/<%= r.catwayNumber %>/reservations/<%= r._id %>">🔍 Voir</a>
                <a class="button" href="/dashboard/bookings/<%= r._id %>/delete">🗑️ Supprimer</a>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } %>
  </div>

</body>
</html>
